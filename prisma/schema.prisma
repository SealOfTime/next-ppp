datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  vkId      String  @id
  firstName String
  lastName  String
  vkUrl     String  @unique
  phone     String? @unique

  role Role @default(PLAYER)

  team   Team?   @relation("teamRelation", fields: [teamID], references: [id])
  teamID String?

  botState String @default("")
  botData  Json?
}

model Team {
  id                 String   @id @default(uuid())
  code               String
  name               String
  legionariesAllowed Boolean
  participationDate  DateTime
  members            User[]   @relation("teamRelation")
}

enum Role {
  PLAYER
  CAPTAIN
  ZOOKEEPER
  ADMIN
}
